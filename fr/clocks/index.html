<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <title>
    Horloges - CSS Animation
  </title>
  <meta
    name="description"
    content="Utiliser CSS et JavaScript pour concevoir et animer des horloges de tous les styles."
  />
  
  <link rel="stylesheet" href="//fast.fonts.net/cssapi/ac2fb2fd-d7da-40b3-b713-85f23384b3af.css" />
  <link rel="stylesheet" href="/css/main.css" />
  
  <link rel="stylesheet" href="/css/custom/clocks.css" />
  
  
  <link rel="canonical" href="/fr/clocks/" />
  <link rel="alternate" type="application/rss+xml" title="CSS Animation" href="/feed.xml" />
  
  
  <meta property="twitter:card" content="summary" />
  <meta property="twitter:site" content="@cssanimation" />
  <meta property="twitter:creator" content="@donovanh" />
  <meta property="og:title" content="Horloges - CSS Animation" />
  <meta property="og:description" content="Utiliser CSS et JavaScript pour concevoir et animer des horloges de tous les styles." />
  <meta property="og:image" content="/images/posts/clocks/twelve.gif" />
  <meta property="og:url" content="/fr/clocks/" />
  

  <meta name="mobile-web-app-capable" content="yes" />
  <link rel="icon" sizes="192x192" href="/images/favicons/favicon-192x192.png" />
  <meta name="apple-mobile-web-app-title" content="CSS Animation" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" href="/images/favicons/apple-touch-icon-152x152.png" />
  <meta name="msapplication-TileImage" content="/images/favicons/apple-touch-icon-144x144.png" />
  <meta name="msapplication-TileColor" content="#fcf5f2" />

  <link rel="shortcut icon" href="/images/favicons/favicon.ico" />
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  
  <meta name="google-site-verification" content="5imT8mOKPjwxAqlEs9aU4uh4jBcsYQyMNdlKgU1Dja8" />

  <style>
    .wow {
      visibility: hidden;
    }
  </style>
</head>


  <body class="">
    

  <section class="post-header">

    <section class="logo">
      <a href="/">
        <section class="svg-logo">
          <a href="/"><img src="/images/rocky.svg" alt="CSS Animation"></a>
        </section>
      </a>
    </section>
    
      <section class="demo">
        <div class="post-header-container clocks single local bounce">
  <article class="clock ios7">
    <span class="extrude1">
      <section class="hours-container">
        <section class="hours angled"></section>
      </section>
    </span>
    <span class="extrude2">
      <section class="minutes-container">
        <section class="minutes angled"></section>
      </section>
    </span>
    <span class="extrude3">
      <section class="seconds-container">
        <section class="seconds"></section>
      </section>
    </span>
  </article>
</div>

      </section>
    
    <div class="absolute-nav">
      <nav>
  <ul>
    <li><a href="/courses/">Learn CSS Animation</a></li>
    <li><a href="https://weekly.cssanimation.rocks">Weekly Newsletter</a></li>
  </ul>
</nav>

    </div>
  </section>

<section class="container page-content">
  <section class="row">
    <article class="post-content nine columns ">
      <h1 class="post-title" style="margin-bottom:4px;">Horloges</h1>
      <p style="font-size: 14px;margin-top: 0;color: #aaa;" class="date">June 27, 2025</p>
      
      <p>Le temps est venu. Dans cet article, nous allons relever le défi de créer et animer une horloge en utilisant des animations CSS simples et un peu de JavaScript.</p>
<p>Voici l’horloge que nous allons créer avec quelques lignes de HTML, de CSS et de JavaScript et un background SVG. Nous utiliserons les animations ou les transitions CSS pour tous les mouvements et nous nous appuierons sur JavaScript pour déterminer l’heure initiale et pour ajouter quelques transformations CSS basiques.</p>
<div class="demo-container clocks single local bounce"> <article class="clock simple"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<h3 id="html" tabindex="-1">HTML</h3>
<p>Pour commencer, nous avons besoin de HTML</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clock<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hours-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hours<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>minutes-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>minutes<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>seconds-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>seconds<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></code></pre>
<p>À l’origine, j’avais trois éléments représentant chacun une aiguille de l’horloge, mais je les ai finalement enveloppés chacun dans un élément conteneur. La première version fonctionnait avec les animations basiques, mais nous avons besoin des éléments conteneurs pour positionner les aiguilles et les animer.</p>
<h2 id="l%E2%80%99horloge%2C-sans-les-aiguilles" tabindex="-1">L’horloge, sans les aiguilles</h2>
<p>Nous commencerons avec une horloge très simple, sans design compliqué.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.clock</span> <span class="token punctuation">{</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/images/posts/clocks/ios_clock.svg<span class="token punctuation">)</span></span> no-repeat center<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> 88%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 20em<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 31%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 20em<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<pre class="language-css"><code class="language-css"><span class="token selector">.clock.simple:after</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 5%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 5%<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Vous pouvez <a href="/images/posts/clocks/ios_clock.svg">récupérer le background SVG ici</a>. J’ai également ajouté un pseudo-élément pour avoir un cercle noir solide au centre. Les aiguilles de l’horloge seront placées sous le pseudo-élément.</p>
<p>Nous devrions maintenant avoir quelque chose comme ceci.</p>
<div class="demo-container clocks single"> <article class="clock simple"></article></div>
<p>Avant d’ajouter les aiguilles, nous devons placer les conteneurs.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.minutes-container,
.hours-container,
.seconds-container</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Chaque conteneur est ainsi empilé au-dessus de l’horloge. Passons maintenant aux aiguilles.</p>
<h3 id="aiguille-des-heures" tabindex="-1">Aiguille des heures</h3>
<p>Chaque aiguille est positionnée de manière absolue (<code>absolute</code>) et placée sur la position de midi. Commençons par l’aiguille des heures.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.hours</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 20%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 48.75%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 30%<span class="token punctuation">;</span>
  <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 2.5%<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>J’utilise les pourcentages pour la fluidité, ça donne un peu plus de boulot mais c’est plus simple ensuite pour adapter l’image aux dimensions de l’écran. Nous réglons la propriété <code>transform-origin</code> sur le bas de l’aiguille pour la faire tourner à partir du point central.</p>
<div class="demo-container clocks single"> <article class="clock simple"><div class="hours-container"> <div class="hours"></div> </div> </article></div>
<h3 id="aiguille-des-minutes" tabindex="-1">Aiguille des minutes</h3>
<p>Elle est assez similaire, mais plus fine et plus longue.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.minutes</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 49%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 10%<span class="token punctuation">;</span>
  <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 2%<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<div class="demo-container clocks single"> <article class="clock simple"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes"></div> </div> </article></div>
<h3 id="aiguille-des-secondes" tabindex="-1">Aiguille des secondes</h3>
<p>Elle aussi est plus fine, mais elle est également placée plus bas de façon à ce qu’une partie dépasse du centre. Il nous faut donc déplacer le point de <code>transform-origin</code> à 80%, ce qui laisse 20% de l’aiguille dépasser au-delà du point central.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.seconds</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 45%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 49.5%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 14%<span class="token punctuation">;</span>
  <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% 80%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 1%<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 8<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<div class="demo-container clocks single"> <article class="clock simple"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<h3 id="animation" tabindex="-1">Animation</h3>
<p>Une horloge arrêtée ne donnera l’heure exacte que deux fois par jour. Ajoutons un peu d’animation pour lui donner plus d’utilité.</p>
<p>Certaines horloges et certaines montres ont une aiguille qui se déplace de manière saccadée, de seconde en seconde, souvent avec un petit bruit. D’autres ont une aiguille qui avance en continu. Nous allons essayer les deux, en commençant par le mouvement continu.</p>
<p>Nous pouvons utiliser une <code>keyframe</code> indiquant aux aiguilles de tourner sur 360 degrés (à partir d’une position 0% sous-entendue).</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@keyframes</span> rotate</span> <span class="token punctuation">{</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotateZ</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Avec cette keyframe, nous disons que l’élément doit s’animer sur 360 degrés lorsque nous lui appliquons la propriété <code>animation</code>. Nous utiliserons une fonction de timing <code>linear</code> pour faire tourner l’aiguille en continu sans à-coups.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.hours-container</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> rotate 43200s infinite linear<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.minutes-container</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> rotate 3600s infinite linear<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.seconds-container</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> rotate 60s infinite linear<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>L’aiguille des heures fait le tour du cadran en 12 heures, soit 43.200 secondes. Celle des minutes le fait en une heure (3.600 secondes) et celle des secondes en une minute.</p>
<p>Tout cela mis ensemble, nous avons maintenant du mouvement !</p>
<div class="demo-container clocks single linear"> <article class="clock simple"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<p>Si vous avez un oeil de lynx, vous arriverez peut-être même à discerner le mouvement de l’aiguille des minutes. Il faudra une heure à l'aiguille des minutes pour faire un tour et douze heures à l'aiguille des heures.</p>
<p>L'aiguille des secondes ne met que 60 secondes à faire le tour du cadran, c'est plus facile à voir.</p>
<h3 id="ajouter-un-mouvement-saccad%C3%A9" tabindex="-1">Ajouter un mouvement saccadé</h3>
<p>Nous pouvons donner un comportement plus naturel à notre horloge en déplaçant l’aiguille des secondes en 60 mouvements séparés. Une façon simple d’y parvenir consiste à utiliser la fonction de timing <code>steps</code>. La propriété <code>animation</code> de chaque aiguille devient :</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.minutes-container</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> rotate 3600s infinite <span class="token function">steps</span><span class="token punctuation">(</span>60<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.seconds-container</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> rotate 60s infinite <span class="token function">steps</span><span class="token punctuation">(</span>60<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>L’aiguille des secondes et celle des minutes tournent maintenant en 60 “pas” dont le navigateur calcule automatiquement l’ampleur.</p>
<div class="demo-container clocks single steps"> <article class="clock simple"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<h3 id="%C3%A0-la-bonne-heure-!" tabindex="-1">À la bonne heure !</h3>
<p>Notre horloge a fière allure, mais elle nous plairait encore plus si elle était à l’heure. Avec un peu de JavaScript nous pouvons donner l’heure exacte à nos visiteurs. Voici le code :</p>
<pre><code>/*
 * Starts any clocks using the user's local time
 * From: cssanimation.rocks/clocks
 */
function initLocalClocks() {
  // Get the local time using JS
  var date = new Date;
  var seconds = date.getSeconds();
  var minutes = date.getMinutes();
  var hours = date.getHours();
</code></pre>
<pre><code>  // Create an object with each hand and it's angle in degrees
  var hands = [
    {
      hand: 'hours',
      angle: (hours * 30) + (minutes / 2)
    },
    {
      hand: 'minutes',
      angle: (minutes * 6)
    },
    {
      hand: 'seconds',
      angle: (seconds * 6)
    }
  ];
  // Loop through each of these hands to set their angle
  for (var j = 0; j &lt; hands.length; j++) {
    var elements = document.querySelectorAll('.' + hands[j].hand);
    for (var k = 0; k &lt; elements.length; k++) {
        elements[k].style.webkitTransform = 'rotateZ('+ hands[j].angle +'deg)';
        elements[k].style.transform = 'rotateZ('+ hands[j].angle +'deg)';
        // If this is a minute hand, note the seconds position (to calculate minute position later)
        if (hands[j].hand === 'minutes') {
          elements[k].parentNode.setAttribute('data-second-angle', hands[j + 1].angle);
        }
    }
  }
}
</code></pre>
<p>Cette fonction convertit l’heure (heures, minutes, secondes) en l’angle correspondant, pour chacune des aiguilles. Elle fait une boucle (&quot;loop&quot;) sur chaque aiguille et applique cet angle en utilisant la propriété <code>style.transform</code> et <code>rotateZ</code>.</p>
<p>Ce code fonctionnera sur la plupart des navigateurs, sauf sur Safari ou d’autres qui ont besoin d’un préfixe. Nous devons donc également utiliser la propriété <code>style.webkitTransform</code>.</p>
<p>Et voilà, notre horloge est alignée avec l’heure du système local.</p>
<div class="demo-container clocks single steps local no-bounce"> <article class="clock simple"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<h3 id="aligner-les-aiguilles-des-minutes-et-des-secondes" tabindex="-1">Aligner les aiguilles des minutes et des secondes</h3>
<p>Nous devons nous assurer que l’aiguille des minutes se déplace au moment où l’aiguille des secondes atteint la position de midi.</p>
<img src="/images/posts/clocks/twelve.gif" alt="Minute hand moving when second hand hits 12" style="max-width: 180px" />
<p>Lorsque l’horloge est dessinée pour la première fois à l’écran, il reste moins d’une minute avant que l’aiguille des minutes ne doive se mouvoir. Pour gérer ce cas particulier, nous pouvons calculer le temps qui reste jusqu’à la prochaine minute et déplacer l’aiguille manuellement. Puisque nous utilisons JavaScript pour ce premier mouvement, nous pouvons continuer à la faire avancer de 6 degrés à chaque minute, en utilisant <code>setInterval</code>.</p>
<p>Avant de faire bouger l’aiguille des minutes, nous devons indiquer où nous en sommes dans la minute en cours. Vous avez sans doute remarqué ces lignes.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">if (degrees[j].hand === 'minutes')</span> <span class="token punctuation">{</span>
  elements[k].parentNode.<span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-second-angle'</span><span class="token punctuation">,</span> degrees[j + 1].degree<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Ces lignes vérifient d’abord que l’aiguille est celle des minutes, et si c’est le cas, donnent au data attribute l’angle actuel de l’aiguille des secondes.</p>
<p>Une fois ce data attribute réglé, nous pouvons utiliser cette donnée pour déterminer à quel moment faire avancer l’aiguille des minutes.</p>
<pre><code>/*
 * Set a timeout for the first minute hand movement (less than 1 minute), then rotate it every minute after that
 */
function setUpMinuteHands() {
  // Find out how far into the minute we are
  var containers = document.querySelectorAll('.minutes-container');
  var secondAngle = containers[0].getAttribute(&quot;data-second-angle&quot;);
  if (secondAngle &gt; 0) {
    // Set a timeout until the end of the current minute, to move the hand
    var delay = (((360 - secondAngle) / 6) + 0.1) * 1000;
    setTimeout(function() {
      moveMinuteHands(containers);
    }, delay);
  }
}
</code></pre>
<pre><code>/*
 * Do the first minute's rotation
 */
function moveMinuteHands(containers) {
  for (var i = 0; i &lt; containers.length; i++) {
    containers[i].style.webkitTransform = 'rotateZ(6deg)';
    containers[i].style.transform = 'rotateZ(6deg)';
  }
  // Then continue with a 60 second interval
  setInterval(function() {
    for (var i = 0; i &lt; containers.length; i++) {
      if (containers[i].angle === undefined) {
        containers[i].angle = 12;
      } else {
        containers[i].angle += 6;
      }
      containers[i].style.webkitTransform = 'rotateZ('+ containers[i].angle +'deg)';
      containers[i].style.transform = 'rotateZ('+ containers[i].angle +'deg)';
    }
  }, 60000);
}
</code></pre>
<h3 id="ajouter-un-rebond" tabindex="-1">Ajouter un rebond</h3>
<p>Puisque nous utilisons JavaScript pour faire avancer l’aiguille des minutes, nous pouvons maintenant supprimer la propriété animation. Mais plutôt que de la supprimer, nous allons la remplacer par une transition, ce qui nous donne une bonne opportunité pour ajouter un peu plus de caractère à notre animation.</p>
<p>Lorsque JavaScript fixe un nouvel angle pour l’aiguille, une transition CSS sur l’élément indique au navigateur d’animer cette nouvelle position. Autrement dit, JavaScript ne va s’occuper que du changement d’angle, tandis que le navigateur s’occupera de l’animation.</p>
<p>Auparavant, nous devons mettre à jour le code afin d’utiliser JavaScript pour déplacer également l’aiguille des secondes. Nous allons animer l’aiguille des secondes 60 fois par minute.</p>
<pre><code>/*
 * Move the second containers
 */
function moveSecondHands() {
  var containers = document.querySelectorAll('.seconds-container');
  setInterval(function() {
    for (var i = 0; i &lt; containers.length; i++) {
      if (containers[i].angle === undefined) {
        containers[i].angle = 6;
      } else {
        containers[i].angle += 6;
      }
      containers[i].style.webkitTransform = 'rotateZ('+ containers[i].angle +'deg)';
      containers[i].style.transform = 'rotateZ('+ containers[i].angle +'deg)';
    }
  }, 1000);
}
</code></pre>
<p>Maintenant que les aiguilles des secondes et des minutes sont toutes deux gérées par JavaScript, mettons à jour notre CSS pour remplacer les propriétés <code>animation</code> par des <code>transitions</code>.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.minutes-container</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.3s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.4<span class="token punctuation">,</span> 2.08<span class="token punctuation">,</span> 0.55<span class="token punctuation">,</span> 0.44<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.seconds-container</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.2s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.4<span class="token punctuation">,</span> 2.08<span class="token punctuation">,</span> 0.55<span class="token punctuation">,</span> 0.44<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Ces transitions s’appliquent à la propriété <code>transform</code> et utilisent la fonction de timing <code>cubic-bezier</code>. C’est cette fonction qui donne aux aiguilles un léger rebond.</p>
<div class="demo-container clocks single local bounce"> <article class="clock simple"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<h3 id="style-ios-7" tabindex="-1">Style iOS 7</h3>
<p>Je suis un grand fan de la simplicité de l’horloge qu’on trouve sur iOS 7. Apple a depuis allongé les aiguilles, mais je préfère la version courte.</p>
<p>Nous pouvons donner un style aux aiguilles et ajouter une image de background avec les numéros pour créer ce look.</p>
<div class="demo-container clocks single local bounce"> <article class="clock ios7"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<p>Ce design est lui-même inspiré de <a href="https://www.youtube.com/watch?v=IvIvKiDWDks">l’horloge des chemins de fer suisses</a> de Hans Hilfiker. En modifiant quelques styles et en ajoutant une nouvelle image de background, nous pouvons adapter notre horloge à ce style.</p>
<div class="demo-container clocks single local bounce"> <article class="clock station"><div class="hours-container"> <div class="hours angled"></div> </div> <div class="minutes-container"> <div class="minutes angled"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<p>Si vous avez d’autres idées de design, faites-le moi savoir.</p>
<h2 id="utiliser-moment.js" tabindex="-1">Utiliser Moment.js</h2>
<p>Quand j’ai pensé à cet article, une de mes premières idées a été de recréer les panneaux d’horloges qu’on trouve dans certains hôtels, qui vous donnent l’heure selon différents fuseaux horaires.</p>
<p>La façon la plus simple de s’ajuster à d’autres fuseaux horaires est d’utiliser la formidable bibliothèque <a href="http://momentjs.com/timezone/">Moment.js Timezone</a>.</p>
<div class="demo-container clocks multiple active bounce"> <article class="clock station js-new-york"><div class="label">New York</div> <div class="hours-container"> <div class="hours"></div> </div> <div class="minutes-container"> <div class="minutes"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article><article class="clock station js-london"><div class="label">Londres</div> <div class="hours-container"> <div class="hours"></div> </div> <div class="minutes-container"> <div class="minutes"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article><article class="clock station js-tokyo"><div class="label">Tokyo</div> <div class="hours-container"> <div class="hours"></div> </div> <div class="minutes-container"> <div class="minutes"></div> </div> <div class="seconds-container"> <div class="seconds"></div> </div> </article></div>
<p>Vous pouvez voir ce code en action dans <a href="http://codepen.io/donovanh/full/vEjywy/">Codepen</a>.</p>
<h2 id="compatibilit%C3%A9-navigateurs" tabindex="-1">Compatibilité navigateurs</h2>
<p>Les navigateurs modernes sont compatibles avec les transitions et animations CSS. IE10+, les derniers Chrome et Firefox les supportent sans préfixes et Safari requiert encore le préfixe <code>-webkit</code>.</p>
<p>N’oubliez pas d’utiliser les propriétés préfixées avec JavaScript également.</p>


      <section class="post-footer">
        <section class="quote-container">
          <section class="rocky">
            <img src="/images/rocky.svg">
          </section>
          <blockquote>
            <p>Make sure to <a href="https://twitter.com/cssanimation">follow on Twitter</a> for all the latest updates!</p>
          </blockquote>
        </section>
      </section>
    </article>
    
    <aside class="post-aside three columns">
      
        <section class="demo-link">
          <a href="http://codepen.io/donovanh/full/vEjywy/" class="button primary-button">Demo</a>
        </section>
      

      
        <section class="translator">
          <h3>Translation Info</h3>
          <p>This article translated by Pierre Choffe. (<a href="/">See original</a>)</p>
        </section>
      
      
      <section class="esteemed-benefactors">
        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CEBICK7W&placement=cssanimationrocks" id="_carbonads_js"></script>
      </section>
    </aside>
  </section>
</section>

    <div class="email-signup" id="email-signup" style="max-width: 500px; margin: 0 auto">
  <h2>CSS Animation Weekly</h2>
  <p>The latest tutorials and inspiration every week!</p>
  <iframe
    src="https://embeds.beehiiv.com/5c8b2503-5d81-4b56-8dd8-da3a39a1d3be?slim=true"
    data-test-id="beehiiv-embed"
    frameborder="0"
    scrolling="no"
    style="margin: 0; border-radius: 0px !important; background-color: transparent;"
  ></iframe>
</div>

<footer class="footer">
  <section class="container">
    <section class="row">
      <p>
        <a href="mailto:hello@cssanimation.rocks">Get in touch</a>
        •
        <a href="/courses/">CSS Courses</a>
      </p>
    </section>
    <section class="row" style="text-align: center">
      <p>
        
          
            
            <a href="/ar/">العربية</a>
          
             | 
            <a href="/cn/">中文</a>
          
             | 
            <a href="/da/">Danske</a>
          
             | 
            <a href="/de/">Deutsch</a>
          
             | 
            <a href="/es/">Español</a>
          
             | 
            <a href="/fr/">Français</a>
          
             | 
            <a href="/jp/">日本語</a>
          
             | 
            <a href="/nl/">Nederlands</a>
          
             | 
            <a href="/pt/">Português</a>
          
             | 
            <a href="/pl/">Polski</a>
          
             | 
            <a href="/ru/">Ру́сский</a>
          
             | 
            <a href="/tr/">Türkçe</a>
          
             | 
            <a href="/id/">Bahasa Indonesia</a>
          
             | 
            <a href="/bg/">български</a>
          
        
      </p>
    </section>
    <section class="row">
      <p>&copy; CSS Animation. Site by <a href="http://hop.ie">Donovan</a></p>
    </section>
  </section>
</footer>

<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="/javascript/site.js"></script>
<script src="/javascript/vendor/wow.min.js"></script>




  
    <script src="/javascript/vendor/moment.min.js"></script>
  
    <script src="/javascript/vendor/moment-timezone.min.js"></script>
  
    <script src="/javascript/vendor/moment-timezone-with-data-2010-2020.min.js"></script>
  



  <script src="/javascript/custom/clocks.js"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>new WOW().init();</script>

  </body>
</html>
